# Проект "Tasklist"

**[Группа проекта на Gitlab](https://gitlab.com/tasklist3)**

## Оглавление
- [Полный стек проекта](#полный-стек-проекта)
- [Описание проекта](#описание-проекта)
- [Микросервисы](#микросервисы)
- [CI/CD](#cicd)
- [Безопасность](#безопасность)
- [Инструкция по запуску](#инструкция-по-запуску)
  - [С помощью Docker](#с-помощью-docker)


## Полный стек проекта
- Java 17
- Maven
- Spring (Boot, Cloud, Web, JPA, Security, Test)
- CI/CD (Gitlab)
- PostgreSQL
- Docker
- Kafka
- Redis
- gRPC
- Keycloak
- Прочие библиотеки:
  - Testcontainers
  - Liquibase
  - Thymeleaf
  - Mapstruct
  - RestAssured


<br>

[К оглавлению](#оглавление)


## Описание проекта

Многопользовательский планировщик задач с JWT-защитой и системой уведомлений. Пользователи могут использовать его в качестве TODO листа.


<br>

[К оглавлению](#оглавление)


## Микросервисы
- [Eureka Discovery Server](#eureka-discovery-server)
- [API Gateway](#api-gateway) 
- [Task Service](#task-service) 
- [Report Scheduler](#report-scheduler) 
- [Email Notification Service](#email-notification-service) 

<br>

### Eureka Discovery Server 
**Роль**: отвечает за регистрацию и обнаружение сервисов.

- Микросервисы регистрируются в Eureka и обмениваются информацией о доступности друг друга.

<br>

### API Gateway
**Роль**: ответственный за маршрутизацию запросов.

- **Функционал**:
  - Принимает все запросы от клиентов и направляет их к соответствующим микросервисам.

<br>

### Task Service
**Роль**: REST API, отвечающий за управление задачами.

- **Функционал**:
  - Создание задачи.
  - Удаление задачи.
  - Обновление задачи.
  - Получение задачи.
  - Получение списка задач текущего пользователя (с поддержкой пагинации).

<br>

### Report Scheduler
**Роль**: сервис, который раз в сутки итерирует всех пользователей и формирует для них отчеты о задачах.

- **Функционал**:
  - Генерирует отчеты о задачах пользователей.
  - Отправляет готовые отчеты в **Email Notification Service** для рассылки.

<br>

### Email Notification Service
**Роль**: принимает и отправляет email-сообщения.

- **Функционал**:
  - Получает отчеты от **Report Scheduler**.
  - Отправляет email-сообщения пользователям с отчетами о задачах.



<br><br>

[К оглавлению](#оглавление)



## CI/CD

Проект использует **GitLab CI/CD** для автоматического тестирования и сборки. Ниже описан используемый pipeline:

### Workflow

- Pipeline запускается для всех веток, кроме `main`, если это не событие merge request.
- Используется **Docker** для управления контейнерами.

### Стейджи (Stages)

1. **test** – включает запуск юнит-тестов и интеграционных тестов.
2. **build** – отвечает за сборку Docker-образа и его публикацию.

### Описание Задач

- **run_unit_tests**: Запускает юнит-тесты с помощью Maven и сохраняет отчеты.
- **run_integration_tests**: Запускает интеграционные тесты и сохраняет их результаты.
- **extract_maven_version**: Получает версию проекта из Maven POM и формирует версию Docker-образа.
- **build_image**: Собирает Docker-образ с версией, полученной на предыдущем шаге, и загружает его в Gitlab Container Registry.



<br><br>

[К оглавлению](#оглавление)



## Безопасность

Для обеспечения безопасности проекта используется **Keycloak** и протокол **OAuth2**



<br><br>

[К оглавлению](#оглавление)



## Инструкция по запуску

### С помощью Docker
*Раздел еще не заполнен*

<br>

[К оглавлению](#оглавление)
